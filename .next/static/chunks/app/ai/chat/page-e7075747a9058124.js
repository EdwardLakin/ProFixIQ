(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{53:(e,t,l)=>{"use strict";l.d(t,{g:()=>s});var a=l(2115);let r="selectedVehicle",s=()=>{let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem(r);if(e)try{let l=JSON.parse(e);t(l)}catch(e){console.error("Failed to parse stored vehicle info:",e)}},[]),(0,a.useEffect)(()=>{e&&localStorage.setItem(r,JSON.stringify(e))},[e]),{vehicleInfo:e,updateVehicle:e=>{t(e),localStorage.setItem(r,JSON.stringify(e))},clearVehicle:()=>{t(null),localStorage.removeItem(r)}}}},2507:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var a=l(5155),r=l(2115),s=l(53),n=l(4015);function o(){let{localVehicle:e}=(0,s.g)(),[t,l]=(0,r.useState)(""),[o,c]=(0,r.useState)(null),[i,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),p=async()=>{if(!t.trim())return void h("Please enter a question.");if(!e)return void h("Please select a vehicle.");d(!0),h(null),c(null);try{let l=await fetch("/api/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dtc:t,vehicle:e})}),a=await l.json();l.ok&&a.result?c(a.result):h(a.error||"No response from TechBot.")}catch(e){console.error(e),h("Error talking to TechBot.")}finally{d(!1)}};return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"TechBot Chat"}),(0,a.jsx)(n.A,{}),(0,a.jsx)("textarea",{value:t,onChange:e=>l(e.target.value),placeholder:"Ask a repair question...",className:"w-full p-2 border rounded min-h-[120px]"}),(0,a.jsx)("button",{onClick:p,disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded shadow",children:i?"Thinkingâ€¦":"Ask TechBot"}),u&&(0,a.jsx)("p",{className:"text-red-600",children:u}),o&&(0,a.jsx)("div",{className:"p-4 bg-gray-100 rounded whitespace-pre-wrap",children:o})]})}},3033:(e,t,l)=>{Promise.resolve().then(l.bind(l,2507))},4015:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var a=l(5155);l(2115);var r=l(53);function s(){let{vehicle:e,setVehicle:t}=(0,r.g)(),l=l=>{let{name:a,value:r}=l.target;t({...e,[a]:r})};return(0,a.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Vehicle Info"}),(0,a.jsx)("input",{type:"text",name:"year",placeholder:"Year",value:(null==e?void 0:e.year)||"",onChange:l,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{type:"text",name:"make",placeholder:"Make",value:(null==e?void 0:e.make)||"",onChange:l,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{type:"text",name:"model",placeholder:"Model",value:(null==e?void 0:e.model)||"",onChange:l,className:"w-full p-2 border rounded"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3033)),_N_E=e.O()}]);
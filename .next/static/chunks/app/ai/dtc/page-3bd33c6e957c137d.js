(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{53:(e,l,t)=>{"use strict";t.d(l,{g:()=>r});var a=t(2115);let s="selectedVehicle",r=()=>{let[e,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem(s);if(e)try{let t=JSON.parse(e);l(t)}catch(e){console.error("Failed to parse stored vehicle info:",e)}},[]),(0,a.useEffect)(()=>{e&&localStorage.setItem(s,JSON.stringify(e))},[e]),{vehicleInfo:e,updateVehicle:e=>{l(e),localStorage.setItem(s,JSON.stringify(e))},clearVehicle:()=>{l(null),localStorage.removeItem(s)}}}},3910:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>n});var a=t(5155),s=t(2115),r=t(53),o=t(4015);function n(){let{localVehicle:e}=(0,r.g)(),[l,t]=(0,s.useState)(""),[n,d]=(0,s.useState)(null),[i,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),p=async()=>{if(!e||!l.trim())return void h("Please select a vehicle and enter a DTC code.");c(!0),h(null),d(null);try{let t=await fetch("/api/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dtc:l,vehicle:e})}),a=await t.json();t.ok&&a.result?d(a.result):h(a.error||"Failed to get DTC diagnosis.")}catch(e){console.error(e),h("Something went wrong while looking up the DTC.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"DTC Code Lookup"}),(0,a.jsx)(o.A,{}),(0,a.jsx)("input",{type:"text",placeholder:"Enter DTC code (e.g. P0171)",value:l,onChange:e=>t(e.target.value),className:"w-full p-2 border rounded"}),(0,a.jsx)("button",{onClick:p,disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded shadow",children:i?"Looking upâ€¦":"Lookup"}),u&&(0,a.jsx)("p",{className:"text-red-600",children:u}),n&&(0,a.jsxs)("div",{className:"p-4 bg-gray-100 rounded",children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Diagnosis Result:"}),(0,a.jsx)("pre",{children:n})]})]})}},4015:(e,l,t)=>{"use strict";t.d(l,{A:()=>r});var a=t(5155);t(2115);var s=t(53);function r(){let{vehicle:e,setVehicle:l}=(0,s.g)(),t=t=>{let{name:a,value:s}=t.target;l({...e,[a]:s})};return(0,a.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Vehicle Info"}),(0,a.jsx)("input",{type:"text",name:"year",placeholder:"Year",value:(null==e?void 0:e.year)||"",onChange:t,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{type:"text",name:"make",placeholder:"Make",value:(null==e?void 0:e.make)||"",onChange:t,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{type:"text",name:"model",placeholder:"Model",value:(null==e?void 0:e.model)||"",onChange:t,className:"w-full p-2 border rounded"})]})}},6578:(e,l,t)=>{Promise.resolve().then(t.bind(t,3910))}},e=>{var l=l=>e(e.s=l);e.O(0,[441,684,358],()=>l(6578)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{4657:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var l=t(5155),s=t(2115),r=t(9535),o=t(5695);let u=(0,r.createBrowserClient)();function n(){let e=(0,o.useRouter)(),[a,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(""),[i,c]=(0,s.useState)([]),[m,d]=(0,s.useState)(""),[b,h]=(0,s.useState)(""),[p,x]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{let{data:e}=await u.from("menu_items").select("complaint");t((null==e?void 0:e.map(e=>e.complaint))||[]);let{data:a}=await u.from("shop_time_slots").select("*").eq("is_booked",!1);c(a||[])})()},[]);let v=async()=>{if(!b||!r||!m)return void alert("Please fill all fields");let{error:a}=await u.from("work_orders").insert({customer_name:b,customer_phone:p,status:"requested",scheduled_time:m,complaints:[r]});a?alert("Failed to submit booking"):e.push("/thank-you")};return(0,l.jsxs)("div",{className:"max-w-xl mx-auto p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Request a Repair"}),(0,l.jsx)("label",{className:"block mb-1",children:"Name"}),(0,l.jsx)("input",{className:"w-full border p-2 mb-4",value:b,onChange:e=>h(e.target.value)}),(0,l.jsx)("label",{className:"block mb-1",children:"Phone"}),(0,l.jsx)("input",{className:"w-full border p-2 mb-4",value:p,onChange:e=>x(e.target.value)}),(0,l.jsx)("label",{className:"block mb-1",children:"Complaint"}),(0,l.jsxs)("select",{className:"w-full border p-2 mb-4",value:r,onChange:e=>n(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select"}),a.map((e,a)=>(0,l.jsx)("option",{value:e,children:e},a))]}),(0,l.jsx)("label",{className:"block mb-1",children:"Available Time Slot"}),(0,l.jsxs)("select",{className:"w-full border p-2 mb-4",value:m,onChange:e=>d(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select"}),i.map(e=>(0,l.jsx)("option",{value:e.start_time,children:new Date(e.start_time).toLocaleString()},e.id))]}),(0,l.jsx)("button",{className:"bg-blue-600 text-white py-2 px-4 rounded",onClick:v,children:"Submit Booking"})]})}},5695:(e,a,t)=>{"use strict";var l=t(8999);t.o(l,"useParams")&&t.d(a,{useParams:function(){return l.useParams}}),t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})},8465:(e,a,t)=>{Promise.resolve().then(t.bind(t,4657))}},e=>{var a=a=>e(e.s=a);e.O(0,[982,535,441,684,358],()=>a(8465)),_N_E=e.O()}]);